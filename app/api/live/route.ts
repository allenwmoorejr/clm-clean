import { NextResponse } from 'next/server';import { detectLiveVideoId, fetchChannelRss } from '@/lib/youtube';export async function GET(){const id=process.env.CHANNEL_ID;if(!id)return NextResponse.json({live:false});try{const v=await detectLiveVideoId(id);if(v)return NextResponse.json({live:true,videoId:v});const rss=await fetchChannelRss(id);const latest=rss.feed?.entry?.[0];const latestId=latest?(latest['yt:videoId']||latest['yt:videoid']):undefined;return NextResponse.json({live:false,latestId})}catch{return NextResponse.json({live:false})}}